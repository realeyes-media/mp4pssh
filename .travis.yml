language: node_js
node_js:
  - "node"
before_script:
  - npm run setup
  - npm run test
script:
  - npm run build
after_success:
  - npm version $VERSION_BUMP_TYPE -m "Bumping to %s"
  - git push --tags
  - npm pack
deploy:
  provider: npm
  email: shared-by-developers@realeyes.com
  api_key:
    secure: $NPM_API_TOKEN
  on:
    tags: true
    repo: realeyes-media/mp4pssh
